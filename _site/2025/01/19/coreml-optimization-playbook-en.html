<!DOCTYPE html>
<html>

<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width initial-scale=1">
<meta property="og:title" content="CoreML Optimization Playbook (Consulting)">

<title>CoreML Optimization Playbook (Consulting)</title>
<meta property="og:description" content="
  TL;DR
  Key design decisions for on-device optimization without quality loss in 3 minutes. Optimization sequence: quantization → distillation → architectu...">
<meta property="og:url" content="https://kyo1988.github.io/2025/01/19/coreml-optimization-playbook-en.html">
<meta property="og:site_name" content="Kyo Harada — Visage AI / Data Scientist">
<meta property="og:locale" content="ja_JP">

<meta property="article:author" content="https://www.linkedin.com/in/KyoHarada" />

<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@kyoHarada">
<meta name="twitter:creator" content="@kyoHarada">
<meta name="twitter:title" content="CoreML Optimization Playbook (Consulting)">
<meta name="twitter:description" content="
  TL;DR
  Key design decisions for on-device optimization without quality loss in 3 minutes. Optimization sequence: quantization → distillation → architectu...">
<meta name="twitter:url" content="https://kyo1988.github.io/2025/01/19/coreml-optimization-playbook-en.html">

<meta name="keywords" content="Data Scientist, AI, CoreML, Finance, EDINET, RAG, LLM, Consulting">

<meta name="google-site-verification" content="kZFzSU3m_vE_Y0Ja60lWjUOKkeGpV7Ch3CvfLeP8Di4" />

<link rel="icon" href="/Kyo.github.io/images/IMG_0168.ico">
<link rel="stylesheet" href="/Kyo.github.io/css/main.css">
<link rel="canonical" href="https://kyo1988.github.io/2025/01/19/coreml-optimization-playbook-en.html">
<link rel="alternate" type="application/atom+xml" title="Kyo Harada — Visage AI / Data Scientist" href="https://kyo1988.github.io/feed.xml" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<script async defer src="//assets.pinterest.com/js/pinit.js"></script>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T222J2Q');</script>
<!-- End Google Tag Manager -->

</head>
<!-- <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-196500796-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-196500796-1');
</script> -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      processEscapes: true
    },
    CommonHTML: { matchFontHeight: false },
    displayAlign: "left",
    displayIndent: "2em",
    TeX: {
      equationNumbers: { autoNumber: "AMS" },
    }
  });
</script>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS_CHTML"></script>
<!-- <link type="application/atom+xml" rel="alternate" href="https://kyo1988.github.io/Kyo.github.io/atom.xml" title="Kyo Harada — Visage AI / Data Scientist" /> -->
<!-- <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>CoreML Optimization Playbook (Consulting) | Kyo Harada — Visage AI / Data Scientist</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="CoreML Optimization Playbook (Consulting)" />
<meta name="author" content="Kyo Harada" />
<meta property="og:locale" content="ja_JP" />
<meta name="description" content="Decision-making for quantization/distillation/architecture design, evaluation metrics, and pitfalls. Key design decisions for on-device optimization without quality loss in 3 minutes." />
<meta property="og:description" content="Decision-making for quantization/distillation/architecture design, evaluation metrics, and pitfalls. Key design decisions for on-device optimization without quality loss in 3 minutes." />
<link rel="canonical" href="https://kyo1988.github.io/Kyo.github.io/2025/01/19/coreml-optimization-playbook-en.html" />
<meta property="og:url" content="https://kyo1988.github.io/Kyo.github.io/2025/01/19/coreml-optimization-playbook-en.html" />
<meta property="og:site_name" content="Kyo Harada — Visage AI / Data Scientist" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-01-19T00:00:00+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="CoreML Optimization Playbook (Consulting)" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Kyo Harada"},"dateModified":"2025-01-19T00:00:00+09:00","datePublished":"2025-01-19T00:00:00+09:00","description":"Decision-making for quantization/distillation/architecture design, evaluation metrics, and pitfalls. Key design decisions for on-device optimization without quality loss in 3 minutes.","headline":"CoreML Optimization Playbook (Consulting)","mainEntityOfPage":{"@type":"WebPage","@id":"https://kyo1988.github.io/Kyo.github.io/2025/01/19/coreml-optimization-playbook-en.html"},"url":"https://kyo1988.github.io/Kyo.github.io/2025/01/19/coreml-optimization-playbook-en.html"}</script>
<!-- End Jekyll SEO tag -->
 -->

<body>

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T222J2Q"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<div class="container">

  <header class="site-header">

  <div class="wrapper">

    <h1 class="site-title"><a href="/Kyo.github.io">Kyo Harada — Visage AI / Data Scientist</a></h1>
    <h3 class="site-meta">Founder & Data Scientist building on-device AI for skin analytics and finance-grade data products.</h3>

    <nav class="site-nav">
<!--       <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a> -->
      <div class="trigger">
        
        
        <a class="page-link" href="/Kyo.github.io/">Home</a>
        
        
        
        <a class="page-link" href="/Kyo.github.io/about/">About</a>
        
        
        
        <a class="page-link" href="/Kyo.github.io/about/">About</a>
        
        
        
        <a class="page-link" href="/Kyo.github.io/archives/">Archives</a>
        
        
        
        <a class="page-link" href="/Kyo.github.io/case-studies/">Case Studies</a>
        
        
        
        <a class="page-link" href="/Kyo.github.io/categories/">Categories</a>
        
        
        
        <a class="page-link" href="/Kyo.github.io/tags/">Tags</a>
        
        
        
        <a class="page-link" href="/Kyo.github.io/guestbook/">Guestbook</a>
        
        
        
        <a class="page-link" href="/Kyo.github.io/xml/feed.xml">Subscribe</a>
        
        
        
        <a class="page-link" href="/Kyo.github.io/DataScience/">DataScience</a>
        
        
        
        <a class="page-link" href="/Kyo.github.io/visualization/">Visualization</a>
        
        
        
        <a class="page-link" href="/Kyo.github.io/marketing/">Marketing</a>
        
        
        
        
        
        <a class="page-link" href="/Kyo.github.io/Investment/">Investment</a>
        
        
        
        <a class="page-link" href="/Kyo.github.io/Travel/">Travel</a>
        
        
        
        
        
        <a class="page-link" href="/Kyo.github.io/newsletter/">Newsletter</a>
        
        
        
        <a class="page-link" href="/Kyo.github.io/press-kit/">Press Kit</a>
        
        
        
        <a class="page-link" href="/Kyo.github.io/xml/sitemap.xml">Sitemap</a>
        
        
        
        <a class="page-link" href="/Kyo.github.io/work-with-me/">Work with me</a>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      </div>
    </nav>

  </div>

</header>


  

  <div class="page-content">
    <div class="wrapper">
      <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>CoreML Optimization Playbook (Consulting) | Kyo Harada — Visage AI / Data Scientist</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="CoreML Optimization Playbook (Consulting)" />
<meta name="author" content="Kyo Harada" />
<meta property="og:locale" content="ja_JP" />
<meta name="description" content="Decision-making for quantization/distillation/architecture design, evaluation metrics, and pitfalls. Key design decisions for on-device optimization without quality loss in 3 minutes." />
<meta property="og:description" content="Decision-making for quantization/distillation/architecture design, evaluation metrics, and pitfalls. Key design decisions for on-device optimization without quality loss in 3 minutes." />
<link rel="canonical" href="https://kyo1988.github.io/Kyo.github.io/2025/01/19/coreml-optimization-playbook-en.html" />
<meta property="og:url" content="https://kyo1988.github.io/Kyo.github.io/2025/01/19/coreml-optimization-playbook-en.html" />
<meta property="og:site_name" content="Kyo Harada — Visage AI / Data Scientist" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-01-19T00:00:00+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="CoreML Optimization Playbook (Consulting)" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Kyo Harada"},"dateModified":"2025-01-19T00:00:00+09:00","datePublished":"2025-01-19T00:00:00+09:00","description":"Decision-making for quantization/distillation/architecture design, evaluation metrics, and pitfalls. Key design decisions for on-device optimization without quality loss in 3 minutes.","headline":"CoreML Optimization Playbook (Consulting)","mainEntityOfPage":{"@type":"WebPage","@id":"https://kyo1988.github.io/Kyo.github.io/2025/01/19/coreml-optimization-playbook-en.html"},"url":"https://kyo1988.github.io/Kyo.github.io/2025/01/19/coreml-optimization-playbook-en.html"}</script>
<!-- End Jekyll SEO tag -->



<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "CoreML Optimization Playbook (Consulting)",
  "description": "Decision-making for quantization/distillation/architecture design, evaluation metrics, and pitfalls. Key design decisions for on-device optimization without quality loss in 3 minutes.",
  "datePublished": "2025-01-19T00:00:00+0900",
  "dateModified": "2025-01-19T00:00:00+0000",
  "author": {
    "@type": "Person",
    "name": "Kyo Harada",
    "sameAs": [
      "https://github.com/kyo1988",
      "https://www.visageaiconsulting.com/",
      "https://www.linkedin.com/in/KyoHarada"
    ]
  },
  "publisher": {
    "@type": "Organization",
    "name": "Visage AI Consulting"
  },
  "mainEntityOfPage": {"@type":"WebPage","@id":"https://kyo1988.github.io/Kyo.github.io/2025/01/19/coreml-optimization-playbook-en.html"}
}
</script>

<div class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 itemprop="name" class="post-title">CoreML Optimization Playbook (Consulting)</h1>
    <meta itemprop="keywords" content="CoreML,On-device,Case-Study,iOS,Machine-Learning" />
    <p class="post-meta">
    Posted in
    
    
    and tagged
    
    <a href="/Kyo.github.io/tags/#CoreML" title="CoreML">CoreML</a>, 
    
    <a href="/Kyo.github.io/tags/#On-device" title="On-device">On-device</a>, 
    
    <a href="/Kyo.github.io/tags/#Case-Study" title="Case-Study">Case-Study</a>, 
    
    <a href="/Kyo.github.io/tags/#iOS" title="iOS">iOS</a>, 
    
    <a href="/Kyo.github.io/tags/#Machine-Learning" title="Machine-Learning">Machine-Learning</a>
    
    
    <time itemprop="datePublished" datetime="2025-01-19">
    on Jan 19, 2025
    </time>
    </p>
  </header>

  <article class="post-content" itemprop="articleBody">
    <div class="tldr">
  <strong>TL;DR</strong>
  <p>Key design decisions for on-device optimization without quality loss in 3 minutes. Optimization sequence: quantization → distillation → architecture design.</p>
</div>

<h2 id="design-decision-framework">Design Decision Framework</h2>

<h3 id="1-quantization">1. Quantization</h3>
<ul>
  <li><strong>INT8 Quantization</strong>: 75% model size reduction with &lt;5% accuracy loss</li>
  <li><strong>Dynamic Quantization</strong>: Quantize only during inference, maintain FP32 during training</li>
  <li><strong>Static Quantization</strong>: Pre-calibration for higher compression rates</li>
</ul>

<h3 id="2-knowledge-distillation">2. Knowledge Distillation</h3>
<ul>
  <li><strong>Teacher-Student</strong>: Knowledge transfer from large to lightweight models</li>
  <li><strong>Temperature Parameter</strong>: Soft label generation with T=3-5</li>
  <li><strong>Loss Function</strong>: Hard labels + soft labels + feature maps</li>
</ul>

<h3 id="3-architecture-design">3. Architecture Design</h3>
<ul>
  <li><strong>MobileNet</strong>: Depthwise separable convolutions for computational reduction</li>
  <li><strong>EfficientNet</strong>: Compound scaling for efficiency maximization</li>
  <li><strong>SqueezeNet</strong>: Fire Module for parameter count reduction</li>
</ul>

<h2 id="evaluation-metrics">Evaluation Metrics</h2>

<div class="key-takeaways">
  <strong>Key Takeaways</strong>
  <ul>
    
    
      <li>Accuracy: Top-1/Top-5 Accuracy</li>
    
      <li>Inference Speed: FPS (Frames Per Second)</li>
    
      <li>Model Size: MB units</li>
    
      <li>Memory Usage: RAM/VRAM</li>
    
      <li>Battery Consumption: mAh/inference</li>
    
  </ul>
</div>

<h2 id="common-pitfalls-and-solutions">Common Pitfalls and Solutions</h2>

<h3 id="typical-failure-patterns">Typical Failure Patterns</h3>
<ol>
  <li><strong>Excessive Quantization</strong>: Significant accuracy degradation</li>
  <li><strong>Improper Distillation</strong>: Temperature setting errors</li>
  <li><strong>Architecture Mismatch</strong>: Task and model incompatibility</li>
</ol>

<h3 id="solutions">Solutions</h3>
<ul>
  <li><strong>Incremental Optimization</strong>: Apply one method at a time and measure effects</li>
  <li><strong>A/B Testing</strong>: Parallel comparison of multiple approaches</li>
  <li><strong>Real Device Validation</strong>: Test on actual devices, not simulators</li>
</ul>

<h2 id="deliverables">Deliverables</h2>

<section class="qa">
  <h2>Q&amp;A</h2>
  
  <dl>
  
    
    
    
    
      <dt>How to choose methods?</dt>
      <dd>Select based on accuracy requirements and constraints. Accuracy priority → distillation, size priority → quantization</dd>
    
  
    
    
    
    
      <dt>What are the evaluation metrics?</dt>
      <dd>Comprehensive evaluation across 5 axes: accuracy, speed, size, memory, battery</dd>
    
  
    
    
    
    
      <dt>What are the deliverables and timeline?</dt>
      <dd>Optimized model, implementation guide, performance report (2-6 weeks)</dd>
    
  
  </dl>
</section>

<h2 id="implementation-example">Implementation Example</h2>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// CoreML optimization implementation example</span>
<span class="kd">import</span> <span class="kt">CoreML</span>

<span class="kd">class</span> <span class="kt">OptimizedModelManager</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">loadOptimizedModel</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">MLModel</span><span class="p">?</span> <span class="p">{</span>
        <span class="k">guard</span> <span class="k">let</span> <span class="nv">modelURL</span> <span class="o">=</span> <span class="kt">Bundle</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="nf">url</span><span class="p">(</span><span class="nv">forResource</span><span class="p">:</span> <span class="s">"optimized_model"</span><span class="p">,</span> <span class="nv">withExtension</span><span class="p">:</span> <span class="s">"mlmodelc"</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">nil</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="k">try</span><span class="p">?</span> <span class="kt">MLModel</span><span class="p">(</span><span class="nv">contentsOf</span><span class="p">:</span> <span class="n">modelURL</span><span class="p">)</span>
    <span class="p">}</span>
    
    <span class="kd">func</span> <span class="nf">predict</span><span class="p">(</span><span class="nv">input</span><span class="p">:</span> <span class="kt">MLFeatureProvider</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">MLFeatureValue</span><span class="p">?</span> <span class="p">{</span>
        <span class="k">guard</span> <span class="k">let</span> <span class="nv">model</span> <span class="o">=</span> <span class="nf">loadOptimizedModel</span><span class="p">()</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="kc">nil</span> <span class="p">}</span>
        <span class="k">return</span> <span class="k">try</span><span class="p">?</span> <span class="n">model</span><span class="o">.</span><span class="nf">prediction</span><span class="p">(</span><span class="nv">from</span><span class="p">:</span> <span class="n">input</span><span class="p">)</span><span class="o">.</span><span class="nf">featureValue</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="s">"output"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="references">References</h2>

<ul>
  <li><a href="https://developer.apple.com/documentation/coreml">CoreML Documentation</a></li>
  <li><a href="https://developer.apple.com/machine-learning/models/">Model Optimization Guide</a></li>
  <li><a href="https://developer.apple.com/videos/">WWDC Sessions</a></li>
</ul>

<div class="cta">
  <h3>相談・見積りのご依頼</h3>
  <p>小さく速く、成果物ベースでご一緒します。</p>
  <p>
    <a class="btn" href="/work-with-me/">Work with me</a>
    <a class="btn ghost" href="/newsletter/">無料ニュースレター</a>
  </p>
</div>

<div class="related">
  <h3>次に読む</h3>
  <ul>
  
    
      
      
      
        <li><a href="/Kyo.github.io/2025/01/19/rag-audit-checklist.html">RAGミニ監査チェックリスト（無料DL）</a></li>
        
      
    
  
    
      
      
      
    
  
    
      
      
      
    
  
    
      
      
      
        <li><a href="/Kyo.github.io/2025/01/19/edinet-db-howto.html">EDINET XBRLで作る投資家級データベース</a></li>
        
      
    
  
    
      
      
      
        <li><a href="/Kyo.github.io/2025/01/19/coreml-optimization-playbook.html">CoreML最適化プレイブック（受託）</a></li>
        
      
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
  </ul>
</div>


  </article>
  <hr />
</div>


<div>
  <h1>Related Posts</h1>
  <ul>
  
    <li><a href="/2025/01/19/rag-audit-checklist.html">RAGミニ監査チェックリスト（無料DL）</a></li>
  
    <li><a href="/2025/01/19/founders-log-01.html">Founder's Log #01 — 週報</a></li>
  
    <li><a href="/2025/01/19/founders-log-01-en.html">Founder's Log #01 — Weekly Update</a></li>
  
    <li><a href="/2025/01/19/edinet-db-howto.html">EDINET XBRLで作る投資家級データベース</a></li>
  
    <li><a href="/2025/01/19/coreml-optimization-playbook.html">CoreML最適化プレイブック（受託）</a></li>
  
    <li><a href="/business/analyics/2021/06/18/SALES-FORECASTING-2.html">SALES FORECASTING 2</a></li>
  
    <li><a href="/business/finance/2021/06/09/organize-and-implement-hull-and-white-1994a-interest-rate-model.html">Organize and implement Hull and White (1994a) interest rate model</a></li>
  
  </ul>
</div>


<section class="pager">
  <ul>
    
    <li class="previous"><a href="/Kyo.github.io/business/analyics/2021/06/18/SALES-FORECASTING-2.html" title="SALES FORECASTING 2">&larr; Older</a></li>
    
    
    <li class="next"><a href="/Kyo.github.io/2025/01/19/coreml-optimization-playbook.html" title="CoreML最適化プレイブック（受託）">Newer &rarr;</a></li>
    
  </ul>
</section>

<div id="disqus_thread"></div>

<script type="text/javascript">

  var disqus_developer = 1;

var disqus_shortname ='kyo';
/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>

<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

    </div>
  </div>
  <section class="pager">
  
  
</section>



  

  <footer class="site-footer">

  <p>Copyright &copy; <a href="/Kyo.github.io/">Kyo Harada — Visage AI / Data Scientist</a></p>
  <p>Powered by <a href="https://github.com/jekyll/jekyll">Jekyll</a>
  on
  <a href="https://github.com/">Github</a>
  | Theme <a href="https://github.com/yulijia/freshman21/">Freshman21</a> Design by <a href="https://yulijia.net">Lijia Yu</a>

</footer>


</div>

<!-- Lazy loading script -->
<script src="/Kyo.github.io/assets/js/lazyfix.js"></script>

</body>

</html>
